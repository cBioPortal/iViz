<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">


  <!-- build:js(.) scripts/iviz-vendor.js -->
  <!-- bower:js -->
  <script src="/bower_components/modernizr/modernizr.js"></script>
  <script src="/bower_components/jquery/dist/jquery.min.js"></script>
  <script src="/bower_components/chosen/chosen.jquery.min.js"></script>
  <script src="/bower_components/datatables/media/js/jquery.dataTables.js"></script>
  <script src="/bower_components/d3/d3.min.js"></script>
  <script src="/bower_components/crossfilter2/crossfilter.min.js"></script>
  <script src="/bower_components/dcjs/dc.js"></script>
  <script src="/bower_components/classie/classie.js"></script>
  <script src="/bower_components/get-style-property/get-style-property.js"></script>
  <script src="/bower_components/get-size/get-size.js"></script>
  <script src="/bower_components/eventie/eventie.js"></script>
  <script src="/bower_components/eventEmitter/EventEmitter.js"></script>
  <script src="/bower_components/unipointer/unipointer.js"></script>
  <script src="/bower_components/unidragger/unidragger.js"></script>
  <script src="/bower_components/draggabilly/draggabilly.js"></script>
  <script src="/bower_components/doc-ready/doc-ready.js"></script>
  <script src="/bower_components/matches-selector/matches-selector.js"></script>
  <script src="/bower_components/fizzy-ui-utils/utils.js"></script>
  <script src="/bower_components/outlayer/item.js"></script>
  <script src="/bower_components/outlayer/outlayer.js"></script>
  <script src="/bower_components/packery/dist/packery.pkgd.js"></script>
  <script src="/bower_components/underscore/underscore.js"></script>
  <script src="/bower_components/ev-emitter/ev-emitter.js"></script>
  <script src="/bower_components/imagesloaded/imagesloaded.js"></script>
  <script src="/bower_components/qtip2/jquery.qtip.js"></script>
  <script src="/bower_components/qtip2/basic/jquery.qtip.js"></script>
  <script src="/bower_components/vue/dist/vue.js"></script>
  <script src="/bower_components/clipboard/dist/clipboard.js"></script>
  <script src="/bower_components/plotly.js/dist/plotly.min.js"></script>
  <script src="/bower_components/react/react.js"></script>
  <script src="/bower_components/react/react-dom.js"></script>
  <script src="/bower_components/fixed-data-table/dist/fixed-data-table.min.js"></script>
  <script src="/bower_components/jstat/dist/jstat.min.js"></script>
  <script src="/bower_components/backbone/backbone.js"></script>
  <script src="/bower_components/jquery-ui/jquery-ui.js"></script>
  <script src="/bower_components/remarkable-bootstrap-notify/bootstrap-notify.js"></script>
  <!-- endbower -->
  <!-- endbuild -->

  <!-- build:css(.) styles/iviz-vendor.css -->
  <link rel="stylesheet" href="/.tmp/styles/vendor.css"/>
  <!-- bower:css -->
  <link rel="stylesheet" href="/bower_components/datatables/media/css/jquery.dataTables.css" />
  <link rel="stylesheet" href="/bower_components/dcjs/dc.css" />
  <link rel="stylesheet" href="/bower_components/qtip2/jquery.qtip.css" />
  <link rel="stylesheet" href="/bower_components/fixed-data-table/dist/fixed-data-table.min.css" />
  <!-- endbower -->
  <!-- endbuild -->

  <!-- build:css(.tmp) styles/vc-session.css -->
  <link rel="stylesheet" href="styles/vendor/vc-session.css"/>
  <!-- endbuild -->
  
  <!-- build:css(.tmp) styles/iviz.css -->
  <link rel="stylesheet" href="styles/main.css"/>
  <!-- endbuild -->
  
  <!-- build:js scripts/cbio-vendor.js -->
  <script src="_components/FileSaver.min.js"></script>
  <script src="_components/cbio-util.js"></script>
  <script src="_components/Notification.js"></script>
  <script src="_components/GeneValidator.js"></script>
  <script src="_components/QueryByGeneUtil.js"></script>
  <script src="_components/QueryByGeneTextArea.js"></script>
  <script src="_components/cbio-util.js"></script>
  <!-- endbuild -->
  
  <!-- build:js scripts/vc-session.js -->
  <script src="_components/vc-session.js"></script>
  <!-- endbuild -->
  
  <!-- build:js scripts/iviz.js -->
  <script src="scripts/main.js"></script>
  <script src="scripts/vueCore.js"></script>
  <script src="scripts/controller/util.js"></script>
  <script src="scripts/controller/sync.js"></script>
  <script src="scripts/controller/event.js"></script>
  <script src="scripts/views/mainTemplate.js"></script>
  <script src="scripts/views/chartGroupTemplate.js"></script>
  <script src="scripts/views/individualChartTemplate.js"></script>
  <script src="scripts/views/components/generalChart.js"></script>
  <script src="scripts/views/components/chartOperationsHeader.js"></script>
  <script src="scripts/views/components/header/manageCharts.js"></script>
  <script src="scripts/views/components/header/breadCrumbTemplate.js"></script>
  <script src="scripts/views/components/pieChart/pieChart.js"></script>
  <script src="scripts/views/components/pieChart/pieChartTemplate.js"></script>
  <script src="scripts/views/components/barChart/barChart.js"></script>
  <script src="scripts/views/components/barChart/barChartTemplate.js"></script>
  <script src="scripts/views/components/scatterPlot/scatterPlot.js"></script>
  <script src="scripts/views/components/scatterPlot/scatterPlotTemplate.js"></script>
  <script src="scripts/views/components/survivalChart/main.js"></script>
  <script src="scripts/views/components/survivalChart/template.js"></script>
  <script src="scripts/views/components/survivalChart/proxy.js"></script>
  <script src="scripts/views/components/survivalChart/components/curve.js"></script>
  <script src="scripts/views/components/survivalChart/components/kmEstimator.js"></script>
  <script src="scripts/views/components/survivalChart/components/logRankTest.js"></script>
  <script src="scripts/views/components/dataTable/tableView.js"></script>
  <script src="scripts/views/components/dataTable/tableViewTemplate.js"></script>
  <script src="scripts/views/components/dataTable/MutatedGeneCNATable.js"></script>
  <script src="scripts/views/components/Notification.js"></script>
  <script src="scripts/views/components/customPlots/CaseDialogBox.js"></script>
  <!-- endbuild -->
  
  <script src="scripts/model/dataProxy.js"></script>
  <script src="_components/cbioportal-client.js"></script>
  
</head>
<body>

<div class="container-fluid" id="complete-screen">
  <nav class="navbar navbar-default navbar-fixed-top">
    <div id="main-header">
      <div id="iviz-header-left">
        <div style="float: left; margin-right: 10px;">
          <session-component :show-save-button="showSaveButton" :show-manage-button="showManageButton"
                             :selected-patients-num="selectedPatientsNum" :selected-samples-num="selectedSamplesNum"
                             :userid="userid" :stats="stats" :update-stats.sync="updateStats"></session-component>
        </div>

        <span class="iviz-header-left-case-name" style="display: block;">Samples selected: </span>
        <span id="iviz-header-left-sample-select" @click="openCases()" class="iviz-header-left-case-number iviz-header-button" 
              :class="{'iviz-button-hover':highlightAllButtons||highlightCaseButtons}" 
              role="button" tabindex="0" style="display: block;">{{ selectedSamplesNum }}</span>
        <span class="iviz-header-left-case-name" style="display: block;">Patients selected: </span>
        <span id="iviz-header-left-patient-select" @click="openCases()" class="iviz-header-left-case-number iviz-header-button" 
              :class="{'iviz-button-hover':highlightAllButtons||highlightCaseButtons}" 
              role="button" tabindex="0" style="display: block;">{{ selectedPatientsNum }}</span>
        
        <span id="iviz-header-left-case-download" class="iviz-header-button" @click="downloadCaseData()" 
              @mouseenter="highlightCaseButtons=true" @mouseleave="highlightCaseButtons=false" role="button" 
              tabindex="0" data-hasqtip="9" aria-describedby="qtip-9"><i class="fa fa-download" alt="download"></i></span>
      
      <span id="query-by-gene-span">
          <span id="queryByGeneTextSpan"></span>
          <textarea id="query-by-gene-textarea" class="expand expandFocusOut" 
                    :class="{'iviz-button-hover':highlightAllButtons}" rows="1" cols="10"></textarea>
      </span>
        <i id="arrow_studyview" class="fa fa-arrow-right fa-lg" aria-hidden="true"></i>
        <form id="iviz-form"  v-on:submit.prevent="submitForm" method="post" target="_blank" style="float: left;">
          <input type="submit" @mouseenter="highlightAllButtons=true" @mouseleave="highlightAllButtons=false" 
                 id="iviz-header-left-1" value="Query" class="iviz-header-button" style="display: block;">
        </form>
      
      </div>
      
      <div id="iviz-header-right">
        <custom-case-input></custom-case-input>
        
        <select id="iviz-add-chart" class="chosen-select"
                v-select :charts="charts">
          <option id='' value="">Add Chart</option>
          <option id="{{data.attr_id}}" v-if="!data.show" value="{{data.attr_id}}" v-for="(index,data) in charts">{{data.display_name}}</option>
        </select>
      </div>

      <div id="breadcrumbs_container" v-if="hasfilters">
        <div style="float:left;" >
          <span class="breadcrumb_container">Your selections: </span>
        </div>

        <span class="breadcrumb_container" v-if="customfilter.patientIds.length>0||customfilter.sampleIds.length>0">
          <span>{{customfilter.display_name}}</span>
          <i class="fa fa-times breadcrumb_remove" @click="clearAll()"></i>
        </span>
        <div style="float:left" v-for="group in groups">
          <bread-crumb :attributes.sync="item"
                       :filters.sync="item.filter" v-for="(index1, item) in group.attributes"
                       v-if="item.filter.length>0" ></bread-crumb>
        </div>
        <div><button type='button' @click="clearAll()" class="btn btn-default btn-xs">Clear All</button></div>
      </div>
    </div>
  </nav>
  <div class="grid" id="main-grid" :class="{loading:isloading}">
    <main-template :groups.sync="groups" :redrawgroups.sync="redrawgroups"
                   :selectedpatients.sync="selectedpatients"
                   :selectedsamples.sync="selectedsamples"
                   :hasfilters.sync="hasfilters" :customfilter.sync="customfilter"></main-template>
  </div>

</div>

</body>
<script>
  $(document).ready(function () {
    //Include style variables
    window.style = {
      vars: {}
    };
    iViz.vue.manage.init();
    $.get('resources/vars.json')
      .then(function(data) {
        window.style.vars = data;
        window.style.vars.survivalWidth = 320;
        window.style.vars.survivalHeight = 320;
        window.style.vars.barchartWidth = 350;
        window.style.vars.barchartHeight = 120;
      });
    window.cbioURL = 'http://www.cbioportal.org';
    window.mutationProfileId ='hnsc_tcga_mutations';
    window.cnaProfileId = 'hnsc_tcga_gistic';
    window.case_set_id = '-1';
    var studyCasesMap = {};
    studyCasesMap['hnsc_tcga']={};
    window.iviz = {};
    window.iviz.datamanager = new iViz.data.init(window.cbioURL, studyCasesMap, iViz.init);
    window.iviz.datamanager.initialSetup();
    //  iViz.data.init(window.cbioURL, ['hnsc_tcga'], iViz.init);
   
    
    QueryByGeneTextArea.init('#query-by-gene-textarea', function(genes) {
      iViz.vue.manage.getInstance().$broadcast('gene-list-updated',genes);
    });

  });
</script>
</html>
